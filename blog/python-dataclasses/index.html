<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">

<meta itemprop="name" content="Data Classes in Python3.7">
<meta itemprop="description" content="What data.. classes.. ? Python 3.7 adds a new module in standard library called Data Classes. So, what are they? what do they do? how do they benefit ? This article shall cover it all.
Data Classes module provides a decorator to automate the creation of data models. A dataclass can be thought of as a mutable object/class that contains no. of fields. These fields are typically known in advance and are stored in a database table or in API.">


<meta itemprop="datePublished" content="2019-04-07T18:09:49&#43;05:30" />
<meta itemprop="dateModified" content="2019-04-07T18:09:49&#43;05:30" />
<meta itemprop="wordCount" content="637">



<meta itemprop="keywords" content="" />
<meta property="og:title" content="Data Classes in Python3.7" />
<meta property="og:description" content="What data.. classes.. ? Python 3.7 adds a new module in standard library called Data Classes. So, what are they? what do they do? how do they benefit ? This article shall cover it all.
Data Classes module provides a decorator to automate the creation of data models. A dataclass can be thought of as a mutable object/class that contains no. of fields. These fields are typically known in advance and are stored in a database table or in API." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dimpu47.github.io/blog/python-dataclasses/" />
<meta property="article:published_time" content="2019-04-07T18:09:49&#43;05:30"/>
<meta property="article:modified_time" content="2019-04-07T18:09:49&#43;05:30"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Data Classes in Python3.7"/>
<meta name="twitter:description" content="What data.. classes.. ? Python 3.7 adds a new module in standard library called Data Classes. So, what are they? what do they do? how do they benefit ? This article shall cover it all.
Data Classes module provides a decorator to automate the creation of data models. A dataclass can be thought of as a mutable object/class that contains no. of fields. These fields are typically known in advance and are stored in a database table or in API."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Data Classes in Python3.7</title>
	<link rel="stylesheet" href="https://dimpu47.github.io/css/style.min.645b14dc26ce57a45585b37a4ef11a96fee72376dcd62ffbcd5103cd5edf7f1c.css" integrity="sha256-ZFsU3CbOV6RVhbN6TvEalv7nI3bc1i/7zVEDzV7ffxw=">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://dimpu47.github.io">gaurolog</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					<a href="https://dimpu47.github.io/posts/">Posts</a>
					<a href="https://dimpu47.github.io/about/">About</a>
					<a href="https://dimpu47.github.io/code/">Code</a>
				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-social hide-in-mobile"><a href="https://twitter.com/dimpu47" target="_blank" rel="noopener" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://github.com/dimpu47" target="_blank" rel="noopener" title="Github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://dimpu47.github.io/posts/">Posts</a></li>
			<li><a href="https://dimpu47.github.io/about/">About</a></li>
			<li><a href="https://dimpu47.github.io/code/">Code</a></li>
		</ul>
	</div>


	<main class="site-main section-inner thin animated fadeIn faster">
		<h1>Data Classes in Python3.7</h1>
		<div class="content">
			

<h3 id="what-data-classes">What data.. classes.. ?<a href="#what-data-classes" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>Python 3.7 adds a new module in standard library called <em>Data Classes</em>. So, what are they? what do they do? how do they benefit ? This article shall cover it all.</p>

<p>Data Classes module provides a <a href="https://www.geeksforgeeks.org/decorators-in-python/"><em>decorator</em></a> to automate the creation of data models. A dataclass can be thought of as a mutable object/class that contains no. of fields. These fields are typically known in advance and are stored in a database table or in API. They also have type using a new typing module.</p>

<pre><code># Simplest example of dataclasses inntroduced in python3.7
import dataclasses

@dataclasses.dataclass
class MyDataClass(obj):
    field_a: int
    field_b: str
</code></pre>

<p>When reading from database or API, you often want predictable python type to be returned, with a set of expected <em>fields</em> and <em>behaviours</em>. Dictionaries are a great data structure and very useful to simplify/categorize information. But when you want stadard data model with fixed list of strings, dataclasses are far more powerful utility.</p>

<p>It also becomes hard to maintain backward-compatibily when you share raw data structures your users. It&rsquo;s common to put logic between accessing and returning of data. This reflection of data from one type to another is a very tedious activity in python. Data Classes are designed as way to automate this reflection bit using decorators involved in creating Data Models.</p>

<blockquote>
<p>dataclasses also leverage type hinting functionality introduced in python3.5</p>
</blockquote>

<p>so you can apply type hints to your field in dataclass. This wasn&rsquo;t entirely possible in previous versions of python, it required a lot of boilerplate for leveragin third party packages like <em>attrs</em>.</p>

<pre><code># Long approach
class Customer (object)
    def __init__(self, id: int, name: str, address: str) -&gt; None:
        self.id = id
        self.name = name self.address = address
    def __repr__(self):
        return f'Customer(id={self.id!r}, name={self.name!r}, address={self.address!r})'
    def __eq__(self, other):
        if other.__class__ is self.__class__:
            return (self.id, self.name, self.address) == (other.id, other.name, other.address) return NotImplemented
    def __ne__(self, other):
        if other.__class__ is self.__class__:
            return (self.id, self.name, self.address) != (other.id, other.name, other.address) return NotImplemented
</code></pre>

<p>Another to achieve similar thing is to use Named Tuples in python. Named tuples are immutable and does not allow attaching methods with it. Any Django developer might think of dataclasses being synonmous to Django Models. Although they are similar, dataclasses is not only for storage in databases.</p>

<p>Below is a generic example of dataclasses, demonstrating a way to store list of customers of a particular website.</p>

<pre><code>from dataclasses import dataclass, field, InitVar
import typing
import uuid


@dataclass
class Customer(object):
    database: InitVar[typing.Any]
    id: int
    name: str
    address: str

    def __post_init__(self, database):
        self.address = self.address.capitalize()
        self._connection = database.connect()


@dataclass(frozen=True, order=True)
class CustomerOrder(object):
    processing_time: typing.ClassVar[int]

    id: uuid.UUID = field(compare=False, default_factory=uuid.uuid4, init=False)
    value: float = field(compare=True)
    product: str = field(compare=False)


@dataclass(frozen=True)
class CustomerOrderExtended(CustomerOrder):
    date_ordered: str
</code></pre>

<blockquote>
<ul>
<li>Mutablity means tendecy to change.</li>
<li>Immutabily is opposite, any type that&rsquo;s not supposed to change, a string constant is perfect example of immutable type.</li>
</ul>
</blockquote>

<p>You can decalare a immutable dataclass that won&rsquo;t change with <code>frozen=True</code> attribute. Now if you instantiate CustomerOrder dataclass <code>order = CustomerOrder(1, 10., &quot;Cheese&quot;)</code> and try to reassign value of id: <code>order.id = 2</code>, it&rsquo;d throw an error:</p>

<pre><code>dataclasses.FrozenInstanceError: cannot assign to field id.
</code></pre>

<p>This is an expected behaviour. Another big benefit of Frozen Types is that they are hashable by default that means implemented dunder hash magic method: <code>__hash__</code>, can be accessed using built-in hash method:</p>

<pre><code>hash(order)
-376120387594030284
</code></pre>

<p>Hashable types can be used in sets and can also be used as a key in a dictionary, so if you wanted a dictionary of orders and it&rsquo;s statuses, you could create a dictionary:</p>

<pre><code>order_statuses = { order: 'processed' }
{CustomerOrder(id=1, value=10.0, product='cheese'): 'processed'}
</code></pre>

<blockquote>
<p>Hashable types are implictly implemented when the type is immutable.</p>
</blockquote>

<p>dunder magic hash method is appplied when when dataclass is frozen. It can also be applied to mutable dataclasses with <code>hash=True</code> attribute passed in:</p>

<pre><code>@dataclass(hash=True)
class Customer(object):
    id: int
    name: str
    address: str
</code></pre>

		</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2019 <a href="https://dimpu47.github.io">Gaurav Choudhary</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://dimpu47.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="https://dimpu47.github.io/js/main.min.8f39f24808e9d0a9b02da58c2d2838da859dc0b7bdfadbdb1883aae8b6adacfe.js" integrity="sha256-jznySAjp0KmwLaWMLSg42oWdwLe9+tvbGIOq6LatrP4="></script>

</body>

</html>
